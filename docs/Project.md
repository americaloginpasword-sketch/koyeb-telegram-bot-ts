# Neurohod Bot - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞

## üìã –û–±–∑–æ—Ä

Neurohod Bot - —ç—Ç–æ Telegram –±–æ—Ç –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ —Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π Google Sheets –∞–Ω–∞–ª–∏—Ç–∏–∫–∏, –Ω–∞–ø–∏—Å–∞–Ω–Ω—ã–π –Ω–∞ TypeScript —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Node.js 20.

## üèó –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫:
- **Runtime**: Node.js 20+
- **Language**: TypeScript (strict mode)
- **Framework**: Express.js + Grammy (Telegram Bot API)
- **Containerization**: Docker
- **Platform**: Koyeb (production)
- **Analytics**: Google Sheets API
- **Monitoring**: Prometheus metrics
- **Logging**: Pino

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞:
```
src/
‚îú‚îÄ‚îÄ bot/           # Telegram –±–æ—Ç –ª–æ–≥–∏–∫–∞
‚îú‚îÄ‚îÄ http/          # HTTP —Å–µ—Ä–≤–µ—Ä –∏ webhook'–∏
‚îú‚îÄ‚îÄ services/      # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ metrics/       # Prometheus –º–µ—Ç—Ä–∏–∫–∏
‚îî‚îÄ‚îÄ index.ts       # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
```

## üöÄ –î–µ–ø–ª–æ–π

### –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞: Koyeb
- **URL**: https://koyeb.com
- **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**: 
  - –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π –ø–ª–∞–Ω (2 –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, 512MB RAM)
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π –∏–∑ GitHub
  - HTTPS –∏–∑ –∫–æ—Ä–æ–±–∫–∏
  - –ê–≤—Ç–æ–º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ

### –§–∞–π–ª—ã –¥–µ–ø–ª–æ—è:
- `Dockerfile` - –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è
- `koyeb.yaml` - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Koyeb
- `KOYEB_DEPLOYMENT.md` - –ø–æ–¥—Ä–æ–±–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
- `scripts/prepare-deploy.sh` - —Å–∫—Ä–∏–ø—Ç –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:
```bash
# –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ —Å–µ–∫—Ä–µ—Ç—ã –≤ Koyeb:
TELEGRAM_BOT_TOKEN=your_bot_token
TELEGRAM_WEBHOOK_URL=https://your-app.koyeb.app/telegram/webhook
SHEET_ID=your_google_sheet_id
GOOGLE_SA_EMAIL=your_service_account_email
GOOGLE_SA_PRIVATE_KEY=your_private_key
```

## üîß –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫:
```bash
npm install
npm run dev
```

### –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –¥–µ–ø–ª–æ—é:
```bash
npm run prepare-deploy
```

### –°–±–æ—Ä–∫–∞:
```bash
npm run build
npm start
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### Health Check:
- Endpoint: `/healthz`
- –ü—Ä–æ–≤–µ—Ä–∫–∞: —Å—Ç–∞—Ç—É—Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, uptime, –ø–∞–º—è—Ç—å

### –ú–µ—Ç—Ä–∏–∫–∏:
- Endpoint: `/metrics`
- –§–æ—Ä–º–∞—Ç: Prometheus
- –ú–µ—Ç—Ä–∏–∫–∏: HTTP –∑–∞–ø—Ä–æ—Å—ã, –æ—à–∏–±–∫–∏, –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:
- –õ–æ–≥–≥–µ—Ä: Pino
- –£—Ä–æ–≤–Ω–∏: error, warn, info, debug
- –§–æ—Ä–º–∞—Ç: JSON

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### Webhook –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:
- HTTPS —Ç–æ–ª—å–∫–æ
- –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ–¥–ø–∏—Å–µ–π (–µ—Å–ª–∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è)
- Rate limiting

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:
- –°–µ–∫—Ä–µ—Ç—ã —Ç–æ–ª—å–∫–æ –≤ Koyeb Secrets
- –ù–∏–∫–∞–∫–∏—Ö —Ç–æ–∫–µ–Ω–æ–≤ –≤ –∫–æ–¥–µ
- –†–µ–≥—É–ª—è—Ä–Ω–∞—è —Ä–æ—Ç–∞—Ü–∏—è

## üìà –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ê–≤—Ç–æ–º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ:
- Koyeb –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç –ø–æ –Ω–∞–≥—Ä—É–∑–∫–µ
- Health checks –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
- Graceful shutdown

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:
- Prometheus –º–µ—Ç—Ä–∏–∫–∏
- –õ–æ–≥–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- –ê–ª–µ—Ä—Ç—ã –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö

## üîÑ CI/CD

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π:
1. Push –≤ main branch
2. Koyeb –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–±–∏—Ä–∞–µ—Ç –∏ –¥–µ–ø–ª–æ–∏—Ç
3. Health check –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å
4. Webhook –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

### –†—É—á–Ω–æ–π –¥–µ–ø–ª–æ–π:
```bash
# –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞
npm run prepare-deploy

# –ö–æ–º–º–∏—Ç –∏ –ø—É—à
git add .
git commit -m "Deploy to Koyeb"
git push origin main
```

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ–∞–π–ª—ã:
- `docs/Project.md` - –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ –æ–±–∑–æ—Ä
- `docs/Tasktracker.md` - —Å—Ç–∞—Ç—É—Å –∑–∞–¥–∞—á
- `docs/changelog.md` - –∏—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π
- `KOYEB_DEPLOYMENT.md` - –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –¥–µ–ø–ª–æ—é

### API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:
- Health check: `GET /healthz`
- –ú–µ—Ç—Ä–∏–∫–∏: `GET /metrics`
- Telegram webhook: `POST /telegram/webhook`

## üêõ Troubleshooting

### –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:
1. **–ë–æ—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç**: –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ Koyeb
2. **–û—à–∏–±–∫–∏ Google Sheets**: –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
3. **Webhook –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç**: –ø—Ä–æ–≤–µ—Ä—å—Ç–µ HTTPS URL

### –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ health
curl https://your-app.koyeb.app/healthz

# –ü—Ä–æ—Å–º–æ—Ç—Ä –º–µ—Ç—Ä–∏–∫
curl https://your-app.koyeb.app/metrics

# –ü—Ä–æ–≤–µ—Ä–∫–∞ webhook
curl -X POST "https://api.telegram.org/bot<TOKEN>/getWebhookInfo"
```

---

**–í–µ—Ä—Å–∏—è**: 1.0.0  
**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ**: 2025-01-27  
**–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞**: Koyeb


